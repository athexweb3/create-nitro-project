buildscript {
repositories {
google()
mavenCentral()
}

dependencies {
classpath "com.android.tools.build:gradle:8.7.2"
classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:1.9.24"
}
}

def getExtOrDefault(name) {
return rootProject.ext.has(name) ? rootProject.ext.get(name) : project.properties["{{className}}_" + name]
}

def getExtOrIntegerDefault(name) {
return rootProject.ext.has(name) ? rootProject.ext.get(name) : (project.properties["{{className}}_" + name]).toInteger()
}

apply plugin: "com.android.library"
apply plugin: "org.jetbrains.kotlin.android"

apply from: "../nitrogen/generated/android/{{className}}+autolinking.gradle"

android {
namespace "{{androidPackage}}"
ndkVersion getExtOrDefault("ndkVersion")
compileSdkVersion getExtOrIntegerDefault("compileSdkVersion")

defaultConfig {
minSdkVersion getExtOrIntegerDefault("minSdkVersion")
targetSdkVersion getExtOrIntegerDefault("targetSdkVersion")

externalNativeBuild {
cmake {
cppFlags "-frtti -fexceptions -Wall -fstack-protector-all"
arguments "-DANDROID_STL=c++_shared"
abiFilters "armeabi-v7a", "x86", "x86_64", "arm64-v8a"
}
}
}

externalNativeBuild {
cmake {
path "CMakeLists.txt"
}
}

buildFeatures {
buildConfig true
prefab true
}

packagingOptions {
excludes = [
"META-INF",
"META-INF/**",
"**/libc++_shared.so",
"**/libfbjni.so",
"**/libjsi.so",
"**/libreactnative.so",
"**/libreactnativejni.so",
"**/libturbomodulejsijni.so",
"**/libreact_nativemodule_core.so"
]
}

compileOptions {
sourceCompatibility JavaVersion.VERSION_1_8
targetCompatibility JavaVersion.VERSION_1_8
}
}

dependencies {
implementation "com.facebook.react:react-native:+"
implementation project(":react-native-nitro-modules")
}